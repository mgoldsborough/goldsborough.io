---
import BaseLayout from './BaseLayout.astro';

interface Props {
  title: string;
  description: string;
  date: Date;
  slug: string;
}

const { title, description, date, slug } = Astro.props;

const formattedDate = date.toLocaleDateString('en-US', {
  day: 'numeric',
  month: 'long',
  year: 'numeric',
  timeZone: 'UTC'
});

// Add ordinal suffix
const day = date.getUTCDate();
const ordinal = (n: number) => {
  const s = ['th', 'st', 'nd', 'rd'];
  const v = n % 100;
  return n + (s[(v - 20) % 10] || s[v] || s[0]);
};
const dateWithOrdinal = formattedDate.replace(/^\d+/, ordinal(day));
---

<BaseLayout title={title} description={description} og={{ article: true, slug }}>
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">{title}</h1>
      <p class="post-meta">
        Published {dateWithOrdinal}
      </p>
    </header>
    <div class="post-content">
      <slot />
    </div>
  </article>

  <nav class="post-nav">
    <a href="/">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
        <path fill-rule="evenodd" d="M12 8a.5.5 0 0 1-.5.5H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5a.5.5 0 0 1 .5.5z"/>
      </svg>
      Back to home
    </a>
  </nav>
</BaseLayout>
